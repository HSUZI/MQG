package com.qingqu.wc.maqi.ui;import android.os.Build;import android.os.Bundle;import android.support.annotation.RequiresApi;import android.support.v4.app.Fragment;import android.support.v4.app.FragmentActivity;import android.support.v4.app.FragmentTransaction;import android.widget.FrameLayout;import android.widget.LinearLayout;import android.widget.RadioGroup;import android.widget.TextView;import com.qingqu.wc.maqi.R;import com.qingqu.wc.maqi.base.BaseFragment;import com.qingqu.wc.maqi.fragment.HomeFragment;import java.util.ArrayList;import java.util.List;import butterknife.BindView;import butterknife.ButterKnife;/** * Created by wc_2 on 2017/8/1. */public class MainActivity extends FragmentActivity {    @BindView(R.id.fl_home)    FrameLayout flHome;   public static RadioGroup rgMain;   public static LinearLayout ll;   public static TextView tv_xuan;    private List<BaseFragment> fragments;    private int position = 1;    private Fragment tempFragemnt;    @RequiresApi(api = Build.VERSION_CODES.LOLLIPOP)    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);//        Window window = getWindow();//        //取消设置透明状态栏,使 ContentView 内容不再覆盖状态栏//        window.clearFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS);//        //需要设置这个 flag 才能调用 setStatusBarColor 来设置状态栏颜色//        window.addFlags(WindowManager.LayoutParams.FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS);//        //设置状态栏颜色//        window.setStatusBarColor(Color.parseColor("#00A5A7"));        setContentView(R.layout.activity_main);        rgMain= (RadioGroup) findViewById(R.id.rg_main);        ll= (LinearLayout) findViewById(R.id.ll);        tv_xuan= (TextView) findViewById(R.id.tv_xuan);        ButterKnife.bind(this);        int id= getIntent().getIntExtra("page", 0);        initFragment();        initListener();        if (id==1){            rgMain.check(R.id.rb_nnkj);        }else{            rgMain.check(R.id.rb_home);        }    } private void initListener() {        rgMain.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() {            @Override            public void onCheckedChanged(RadioGroup radioGroup, int i) {                switch (i){                    case R.id.rb_home:                        position=0;                        break;                    case R.id.rb_time:                        position=2;//                        HomeFragment.myslidemenu.close();                        break;                    case R.id.rb_nnkj:                        position=1;                        break;                    case R.id.rb_che:                        position=3;                        break;                    case R.id.rb_vip:                        position=4;                        break;                    default:                        position=0;                        break;                }                //根据位置不同取不同的fragment                BaseFragment baseFragment=getFragment(position);                switchFragmnet(tempFragemnt,baseFragment);            }        });    } private void initFragment() {        fragments=new ArrayList<>();        fragments.add(new HomeFragment());        fragments.add(new HoudActivity());        fragments.add(new ShoppingDraw());        fragments.add(new ShoppingDraw());        fragments.add(new MemberCenterActivity());    }    private BaseFragment getFragment(int position){        if(fragments!=null&&fragments.size()>0){            BaseFragment baseFragment=fragments.get(position);            return baseFragment;        }        return null;    } /**     * 切换Fragment     * @param nextFragment     */    private void switchFragmnet(Fragment fromFrament,BaseFragment nextFragment){        if(tempFragemnt!=nextFragment){            tempFragemnt=nextFragment;            if(nextFragment!=null){                FragmentTransaction transaction=getSupportFragmentManager().beginTransaction();                if(!nextFragment.isAdded()){                    if(fromFrament!=null){                        transaction.hide(fromFrament);                    }                    //添加Fragment                    transaction.add(R.id.fl_home,nextFragment).commit();                }else{  if(fromFrament!=null){                    transaction.hide(fromFrament);                }                    transaction.show(nextFragment).commit();                }            }        }    }}