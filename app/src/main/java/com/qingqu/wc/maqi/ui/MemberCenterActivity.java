package com.qingqu.wc.maqi.ui;import android.content.Intent;import android.graphics.drawable.ColorDrawable;import android.os.Build;import android.os.Bundle;import android.support.annotation.RequiresApi;import android.view.Gravity;import android.view.LayoutInflater;import android.view.View;import android.view.ViewGroup;import android.widget.AdapterView;import android.widget.Button;import android.widget.GridView;import android.widget.ImageView;import android.widget.LinearLayout;import android.widget.ListView;import android.widget.PopupWindow;import android.widget.TextView;import android.widget.Toast;import com.qingqu.wc.maqi.R;import com.qingqu.wc.maqi.adapter.CjAdapter;import com.qingqu.wc.maqi.adapter.ShareAdapter;import com.qingqu.wc.maqi.base.BaseFragment;import butterknife.BindView;import butterknife.ButterKnife;import butterknife.OnClick;import butterknife.Unbinder;public class MemberCenterActivity extends BaseFragment {    @BindView(R.id.headTV)    TextView headTV;    @BindView(R.id.iv_cj)    ImageView ivCj;    @BindView(R.id.iv_dd)    ImageView ivDd;    @BindView(R.id.iv_fx)    ImageView ivFx;    @BindView(R.id.iv_ds)    ImageView ivDs;    @BindView(R.id.iv_yq)    ImageView ivYq;    @BindView(R.id.iv_sh)    ImageView ivSh;    Unbinder unbinder;    CjAdapter cjAdapter;    @BindView(R.id.lv_data)    ListView lvData;    @BindView(R.id.iv_title)    ImageView ivTitle;    @BindView(R.id.iv_back)    LinearLayout ivBack;    @BindView(R.id.tv_right)    LinearLayout tvRight;    Unbinder unbinder1;    /**     * 分享     */    private PopupWindow popupWindow;    private View parent;    private int[] CJImage = {R.mipmap.bingx, R.mipmap.xiyj, R.mipmap.shouj, R.mipmap.kongt, R.mipmap.weibl};    private String[] CJname = {"冰箱", "洗衣機", "手機", "空調", "微波爐"};    private int[] CJImage1 = {R.mipmap.bingx, R.mipmap.bingx, R.mipmap.bingx, R.mipmap.bingx, R.mipmap.bingx};    private String[] CJname1 = {"冰箱", "冰箱", "冰箱", "冰箱", "冰箱"};    @RequiresApi(api = Build.VERSION_CODES.LOLLIPOP)    public View initView() {        View view = View.inflate(mContext, R.layout.member_centers, null);        unbinder = ButterKnife.bind(this, view);        cjAdapter = new CjAdapter(getActivity(), CJImage, CJname, 1);        lvData.setAdapter(cjAdapter);        lvData.setOnItemClickListener(new AdapterView.OnItemClickListener() {            @Override            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {               Intent intent =new Intent(getActivity(),CjEnterActivity.class);                getActivity().startActivity(intent);            }        });        headTV.setText("個人中心");        ivBack.setVisibility(View.VISIBLE);        ivBack.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View v) {                getActivity().finish();            }        });        tvRight.setVisibility(View.VISIBLE);        tvRight.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View v) {                Intent intent = new Intent(getActivity(), CzActivity.class);                getActivity().startActivity(intent);            }        });showFX();        return view;    }    private static int ids=0;    @OnClick({R.id.iv_cj, R.id.iv_dd, R.id.iv_fx, R.id.iv_ds, R.id.iv_yq, R.id.iv_sh})    public void onClick(View view) {        switch (view.getId()) {            case R.id.iv_cj:                ids=1;                ivTitle.setBackgroundResource(R.mipmap.t_cj);                cjAdapter = new CjAdapter(getActivity(), CJImage, CJname, 1);                lvData.setAdapter(cjAdapter);                lvData.setOnItemClickListener(new AdapterView.OnItemClickListener() {                    @Override                    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {                        if (ids==1) {                            Intent intent = new Intent(getActivity(), CjEnterActivity.class);                            getActivity().startActivity(intent);                        }                    }                });                break;            case R.id.iv_dd:                ids=2;                ivTitle.setBackgroundResource(R.mipmap.t_dd);                cjAdapter = new CjAdapter(getActivity(), CJImage1, CJname1, 2);                lvData.setAdapter(cjAdapter);                break;            case R.id.iv_fx:                ids=2;//                ivTitle.setBackgroundResource(R.mipmap.t_xl);//                cjAdapter = new CjAdapter(getActivity(), CJImage1, CJname1, 4);//                lvData.setAdapter(cjAdapter);                // 分享点击事件                popupWindow.showAtLocation(parent, Gravity.BOTTOM, 0, 0);                break;            case R.id.iv_ds:                ids=2;                ivTitle.setBackgroundResource(R.mipmap.t_ds);                cjAdapter = new CjAdapter(getActivity(), CJImage1, CJname1, 3);                lvData.setAdapter(cjAdapter);                break;            case R.id.iv_yq:                ids=2;                ivTitle.setBackgroundResource(R.mipmap.t_yq);                cjAdapter = new CjAdapter(getActivity(), CJImage1, CJname1, 5);                lvData.setAdapter(cjAdapter);                break;            case R.id.iv_sh:                ids=2;                ivTitle.setBackgroundResource(R.mipmap.t_ds);                Intent intent=new Intent(getActivity(),ShoudizhiActivity.class);                getActivity().startActivity(intent);                break;        }    }    private void showFX() {        // 分享：初始化        View contentView = LayoutInflater.from(mContext)                .inflate(R.layout.popwindow, null);// 定义视图        GridView gridView = (GridView) contentView.findViewById(R.id.gridView1);// 窗口布局        Button bt= (Button) contentView.findViewById(R.id.btn_cancel);        bt.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View v) {                popupWindow.dismiss();            }        });        ShareAdapter adapter=new ShareAdapter(getActivity());        gridView.setAdapter(adapter);// 添加适配器        gridView.setOnItemClickListener(new ItemClickListener1());// 网格监听事件        popupWindow = new PopupWindow(contentView,                ViewGroup.LayoutParams.MATCH_PARENT,                ViewGroup.LayoutParams.WRAP_CONTENT);        popupWindow.setFocusable(true);        popupWindow.setAnimationStyle(R.style.popwin_anim_style);//        ColorDrawable dw = new ColorDrawable(getResources().getColor(//                R.color.ccc));//        popupWindow.setBackgroundDrawable(dw);        parent = ((ViewGroup) getActivity().findViewById(android.R.id.content))                .getChildAt(0);    }    @Override    public void onDestroyView() {        super.onDestroyView();        unbinder.unbind();    }    private final class ItemClickListener1 implements AdapterView.OnItemClickListener {        @Override        public void onItemClick(AdapterView<?> parent, View view, int position,                                long id) {            if (popupWindow.isShowing()) {                switch (position) {                    case 0://                        Toast.makeText(getActivity(), "微信收藏", Toast.LENGTH_SHORT).show();                        break;                }                popupWindow.dismiss();                // 消失            }        }    }    @Override    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {        // TODO: inflate a fragment view        View rootView = super.onCreateView(inflater, container, savedInstanceState);        unbinder1 = ButterKnife.bind(this, rootView);        return rootView;    }}