package com.qingqu.wc.maqi.fragment;import android.content.Context;import android.content.Intent;import android.os.Bundle;import android.support.design.widget.TabLayout;import android.support.v4.view.ViewPager;import android.support.v7.widget.GridLayoutManager;import android.support.v7.widget.RecyclerView;import android.util.Log;import android.view.LayoutInflater;import android.view.View;import android.view.ViewGroup;import android.widget.AdapterView;import android.widget.ImageView;import android.widget.ListView;import com.qingqu.wc.maqi.R;import com.qingqu.wc.maqi.adapter.HomeFeagAdapter;import com.qingqu.wc.maqi.adapter.Menu_adapter;import com.qingqu.wc.maqi.base.Banners;import com.qingqu.wc.maqi.base.BaseFragment;import com.qingqu.wc.maqi.base.HomeBase;import com.qingqu.wc.maqi.ui.LianxiActivity;import com.qingqu.wc.maqi.ui.LoginActivity;import com.qingqu.wc.maqi.ui.MainActivity;import com.qingqu.wc.maqi.ui.PinpaiActivity;import com.qingqu.wc.maqi.view.MyLinerLayout;import com.qingqu.wc.maqi.view.MySlideMenu;import java.util.ArrayList;import java.util.List;import butterknife.BindView;import butterknife.ButterKnife;import butterknife.Unbinder;/** * Created by Administrator on 2017/5/15. */public class HomeFragment extends BaseFragment {    HomeFeagAdapter adapter;    HomeBase base = new HomeBase();    @BindView(R.id.t3)    ImageView t3;    Unbinder unbinder;    @BindView(R.id.my_layout)    MyLinerLayout myLayout;    @BindView(R.id.myslidemenu)  public  MySlideMenu myslidemenu;    @BindView(R.id.menu_listview)    ListView menuListview;    Unbinder unbinder2;    private TabLayout mTabLayout;    private ViewPager mViewPager;    int[] s = {R.mipmap.pic1, R.mipmap.pic2, R.mipmap.pic2};    Intent intent;    @Override    public View initView() {        View view = View.inflate(mContext, R.layout.fragment_home, null);        unbinder = ButterKnife.bind(this, view);        myLayout.setSlideMenu(myslidemenu);        t3.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View v) {                if (myslidemenu.getDragState() == MySlideMenu.DragState.STATE_OPEN) {                    myslidemenu.close();//                    HomeFeagAdapter.banner.start();                } else if (myslidemenu.getDragState() == MySlideMenu.DragState.STATE_CLOSE) {                    myslidemenu.open();//                    HomeFeagAdapter.banner.stopAutoPlay();                }            }        });        myslidemenu.setOnDragStateChangeListener(new MySlideMenu.onDragStateChangeListener() {            @Override            public void onOpen() {                Log.w("毛麒添", "侧滑面板打开了");            }            @Override            public void onClose() {                Log.w("毛麒添", "侧滑面板关闭了");                //侧换面板关闭让左上角的小图片抖动//                ViewPropertyAnimator.animate(iv_head).translationX(15)//                        .setInterpolator(new CycleInterpolator(4))//左右抖动四次//                        .setDuration(300)//                        .start();            }            @Override            public void Draging(float fraction) {                Log.w("毛麒添", "侧滑正在滑动" + fraction);                //拖动过程中让图标渐变消失//                ViewHelper.setAlpha(iv_head,1-fraction);            }        });        Menu_adapter ment_adapter=new Menu_adapter(getActivity());        menuListview.setAdapter(ment_adapter);        menuListview.setOnItemClickListener(new AdapterView.OnItemClickListener() {            @Override            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {                switch (position){                    case 0:                        myslidemenu.close();                        HomeFeagAdapter.banner.start();                        break;                    case 1:                        myslidemenu.close();                        intent=new Intent(getActivity(), MainActivity.class);                        intent.putExtra("page",1);                        getActivity().onBackPressed();                        getActivity().startActivity(intent);                        break;                    case 2:                        myslidemenu.close();                         intent=new Intent(getActivity(), PinpaiActivity.class);                        getActivity().startActivity(intent);                        break;                    case 3:                        myslidemenu.close();                        break;                    case 4:                        myslidemenu.close();                        intent=new Intent(getActivity(), LianxiActivity.class);                        getActivity().startActivity(intent);                        break;                    case 5:                        myslidemenu.close();                         intent=new Intent(getActivity(), LoginActivity.class);                        getActivity().startActivity(intent);                        break;                }            }        });        RecyclerView rvHome = (RecyclerView) view.findViewById(R.id.rv_home);        List<Banners> list = new ArrayList<>();        Banners banners = new Banners();        for (int i = 0; i < s.length; i++) {            banners.setImg(s[i]);            list.add(banners);        }        base.setBanners(list);//        base.setBanners(list);        adapter = new HomeFeagAdapter(getActivity(), base);        rvHome.setAdapter(adapter);        GridLayoutManager manager = new GridLayoutManager(mContext, 1);        //设置跨度大小监听        rvHome.setLayoutManager(manager);        //设置布局管理者//        rvHome.setLayoutManager(manager);//        List<String> titles = new ArrayList<>();//        titles.add("熱門");//        titles.add("手機3C");//        titles.add("點卡禮券");//        titles.add("新品專區"); rvHome.setLayoutManager(manager);        return view;    }    @Override    public void onDestroyView() {        super.onDestroyView();        unbinder.unbind();    }    @Override    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {        // TODO: inflate a fragment view        View rootView = super.onCreateView(inflater, container, savedInstanceState);        unbinder2 = ButterKnife.bind(this, rootView);        return rootView;    }    class CustomLinearLayoutManager extends GridLayoutManager {        private boolean isScrollEnabled = true;        public CustomLinearLayoutManager(Context context) {            super(context, 1);        }        public void setScrollEnabled(boolean flag) {            this.isScrollEnabled = flag;        }        @Override        public boolean canScrollVertically() {            //Similarly you can customize "canScrollHorizontally()" for managing horizontal scroll            return isScrollEnabled && super.canScrollVertically();        }    }    @Override    public void initData() {        super.initData();        //联网请求主页的数据        getDataFromNet();    }    private void getDataFromNet() {    }//    onHiddenChanged    @Override    public void onHiddenChanged(boolean hidden) {        super.onHiddenChanged(hidden);        myslidemenu.close();    }}